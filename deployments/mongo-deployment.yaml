---
apiVersion: v1
kind: Service
metadata:
  name: web-service
spec:
  selector:
    app: web
  ports:
    - protocol: TCP
      # service port in cluster
      port: 3000
      # port to contact inside container
      targetPort: 3000
      # targetPort: 3000
      nodePort: 30001
  type: NodePort
#
# ---
# apiVersion: apps/v1 # for versions before 1.9.0 use apps/v1beta2
# kind: Deployment
# metadata:
#   name: web-deployment
#   labels:
#     app: web
# spec:
#   selector:
#     matchLabels:
#       app: web
#   replicas: 3 # tells deployment to run 2 pods matching the template
#   template:
#     metadata:
#       labels:
#         app: web
#     spec:
#       containers:
#       - name: web
#         image: ioannispapakonstantinou/microwebapp_web
#         ports:
#         - containerPort: 3000

---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: pois-mongo-pv-claim
  namespace: pois
spec:
  storageClassName: manual
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi

---
apiVersion: v1
kind: PersistentVolume
metadata:
  name: pois-mongo-pv-volume
  namespace: pois
  labels:
    type: local
spec:
  storageClassName: manual
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/mnt/data"
